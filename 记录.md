## <font color=Red>记录</font>

!["不显示图片时的alt"]("https://note.youdao.com/yws/res/272/WEBRESOURCE9d30a122d186506672c07ccad108b402","知识图谱")
#### 2020-12-11 WebAppNet5 添加Html ViewBag ViewData TempData传值

#### 2020-12-11 WebAppNet5 添加Razor的定义扩展标签和taghelper标签


#### 2020-12-10 WebAppNet5 添加NLog日志 添加NLog.Web.AspNetCore.dll
1. 在Program中添加NLog日志
```
 public static void Main(string[] args)
        {
            var log = NLogBuilder.ConfigureNLog("Config/nlog.config").GetCurrentClassLogger();
            try
            {
                log.Info("开启日志服务");
                CreateHostBuilder(args).Build().Run();
            }
            catch (System.Exception ex)
            {
                log.Error($"{ex}");
            }
            finally {
                log.Info("日志服务关闭");
                NLog.LogManager.Shutdown();
            }  
        }

        public static IHostBuilder CreateHostBuilder(string[] args) =>
            Host.CreateDefaultBuilder(args)
            //.ConfigureLogging(logbuild => logbuild.AddLog4Net("Config/log4net.config"))//log4net第一种使用方法
            .ConfigureWebHostDefaults(webBuilder =>
                {
                    //webBuilder.UseStartup<Startup>();
                    //多环境---启动类多环境 ====自动寻找指定程序集下对于的Startup类===StartupDemo
                    //webBuilder.UseStartup(System.Reflection.Assembly.GetExecutingAssembly().FullName);
                    //多环境---启动类中的方法多环境 Startup类===新添加 ConfigureDemoServices和ConfigureDemo，后缀Demo
                    webBuilder.UseStartup<Startup>();
                })
            .UseServiceProviderFactory(new AutofacServiceProviderFactory())//添加AutofacServiceProviderFactory依赖注入容器
             .ConfigureLogging(logging =>
             {
                 logging.ClearProviders();//清除其他的文件日志文件提供器
                 logging.SetMinimumLevel(LogLevel.Error);//Logging LogLevel设置 优先级 command > appsettings.json > 硬编码
             })
            .UseNLog();//依赖注入NLog日志组件 
```
2. 新建Config/nlog.config配置文件(注意一般名称小写nlog.config)，内容如下
```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<targets>
		<target name="logfile" xsi:type="File" fileName="file.txt" />
		<target name="logconsole" xsi:type="Console" />
	</targets>

	<rules>
		<logger name="*" minlevel="Info" writeTo="logconsole" />
		<logger name="*" minlevel="Debug" writeTo="logfile" />
	</rules>
</nlog>
```
3. 修改nlog.config属性 复制到输出目录 -》 始终复制，生成操作 -》内容


#### 2020-12-10 WebAppNet5 添加Log4Net日志 添加Microsoft.Extensions.Logging.Log4Net.AspNetCore.dll
1. 在Configure中添加ILoggerFactory loggerFactory即可
``` public void Configure(IApplicationBuilder app, IWebHostEnvironment env, ILoggerFactory loggerFactory)
        {
            if (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
            }
            else
            {
                app.UseExceptionHandler("/Home/Error");
                // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
                app.UseHsts();
            }
            loggerFactory.AddLog4Net("log4net.config");//第二种使用方法
            app.UseHttpsRedirection();
            app.UseStaticFiles();

            app.UseRouting();

            app.UseAuthorization();

            app.UseEndpoints(endpoints =>
            {
                endpoints.MapControllerRoute(
                    name: "default",
                    pattern: "{controller=Home}/{action=Index}/{id?}");
            });
        } 
```
2. 在CreateHostBuilder中添加.ConfigureLogging(logbuild => logbuild.AddLog4Net("log4net.config"))//第一种使用方法
```
public static IHostBuilder CreateHostBuilder(string[] args) =>
            Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logbuild => logbuild.AddLog4Net("log4net.config"))//第一种使用方法
            .ConfigureWebHostDefaults(webBuilder =>
                {
                    webBuilder.UseStartup<Startup>();
                }).UseServiceProviderFactory(new AutofacServiceProviderFactory());//添加AutofacServiceProviderFactory依赖注入容器
```
3. 
#### 2020-12-10 WebAppNet5 添加AutofacServiceProviderFactory依赖注入容器
1. nuget 添加Autofac
2. Program中添加UseServiceProviderFactory(new AutofacServiceProviderFactory());//添加AutofacServiceProviderFactory依赖注入容器
3. 代码如下：
``` 
public static IHostBuilder CreateHostBuilder(string[] args) =>
            Host.CreateDefaultBuilder(args)
                .ConfigureWebHostDefaults(webBuilder =>
                {
                    webBuilder.UseStartup<Startup>();
                }).UseServiceProviderFactory(new AutofacServiceProviderFactory());//添加AutofacServiceProviderFactory依赖注入容器
```
3. 3、
4.
4. 4、

#### 2020-12-3 自定义容器IOC(控制反转)，使用DI(依赖注入) 测试成功

#### 2020-12-3 添加自定义容器
![图片链接](地址,"标题")
[超链接](地址,"标题")

1. IOC 控制反转 以前是自己创建类的实例对象，现在有容器进行创建
2. DI 可以通过依赖注入的方式(构造函数，属性，方法)进行属性赋值
3. 存储容器创建的对象，使用哈希表来存储(哈希字典，hashset等，不建议使用List，一方面性能差，二来检索效率低)

#### 2020-12-2 添加lambda 表达式拼接
#### 2020-11-2 CommonTools文件夹下的ComLibs是常用的类库集合
#### 2020-12-2 Test文件夹下的ConsoleTest是测试常用的类库的测试程序
