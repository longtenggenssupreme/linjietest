# <font color=Red>LinjieWebApi记录</font>
##### 2020-12-23 WebAppNet5添加autofac的Autofac AOP 
1. Nuget引用Castle.Core，Autofac.Extras.DynamicProxy,
2. 动态异步 Castle.Core.AsyncInterceptor
```
public void ConfigureContainer(ContainerBuilder containerBuilder)
        {
            #region 添加拦截器的精简写法
            //添加拦截器的精简写法
            containerBuilder.RegisterType<LoggerAsyncInterceptor>().AsSelf();//IAsyncInterceptor拦截器
            containerBuilder.RegisterType<LoggerInterceptor>().AsSelf();//Interceptor拦截器
            var typeTests = GetType().Assembly.ExportedTypes.Where(t => t.Name.Contains("Test")).ToArray();
            containerBuilder.RegisterTypes(typeTests).AsImplementedInterfaces().EnableInterfaceInterceptors().InterceptedBy(typeof(LoggerInterceptor)); 
            #endregion
        }
```